#: kivy 1.10.0

AttractorGame:


<AttractorGame>:
    id: game
    gameworld: gameworld

    GameWorld:
        id: gameworld
        gamescreenmanager: gamescreenmanager
        size_of_gameworld: 100 * 1024
        zones: {'general': 20000, 'touch': 1000}

        PositionSystem2D:
            system_id: 'position'
            gameworld: gameworld
            zones: ['general', 'touch']

        RotateSystem2D:
            system_id: 'rotate'
            gameworld: gameworld
            zones: ['general']

        CymunkPhysics:
            system_id: 'cymunk_physics'
            gameworld: gameworld
            zones: ['general']

        RotateRenderer:
            system_id: 'rotate_renderer'
            gameworld: gameworld
            frame_count: 2
            updateable: True
            force_update: True
            gameview: 'play_camera'
            shader_source: 'resources/shaders/p_r_shader.glsl'
            zones: ['general']

        GameView:
            system_id: 'play_camera'
            gameworld: gameworld
            id: play_camera
            size: root.size
            window_size: root.size
            pos: root.pos
            updateable: True
            do_scroll: True
            do_scroll_lock: True
            #focus_entity: True
            #entity_to_focus: game.player_id
            touch_pass_through: True
            zones: ['general']

        ChargeSystem:
            system_id: 'charge'
            gameworld: gameworld
            zones: ['general']

    GameScreenManager:
        id: gamescreenmanager
        gameworld: gameworld
        size: root.size
        pos: root.pos


<GameScreenManager>:
    MenuScreen:
        id: menu_screen

    PlayScreen:
        id: play_screen


<MenuScreen@GameScreen>:
    name: 'menu_screen'

    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint: 0.4, 0.25

        Button:
            text: 'P'
            on_release: app.game.go_to_play_screen()


<PlayScreen@GameScreen>:
    name: 'play_screen'

    FloatLayout:
        Button:
            text: '+'
            pos_hint: {'x': 0, 'center_y': 0.5}
            size_hint: 0.1, 0.1
            on_release: app.game.change_attractor_charge('+')
        Button:
            text: '-'
            pos_hint: {'right': 1, 'center_y': 0.5}
            size_hint: 0.1, 0.1
            on_release: app.game.change_attractor_charge('-')
        Button:
            text: 'n'
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: 0.1, 0.1
            on_release: app.game.change_attractor_charge('n')
